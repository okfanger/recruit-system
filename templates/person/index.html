<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="/static/css/ax.css" rel="stylesheet" type="text/css">
    <link href="/static/css/ax-response.css" rel="stylesheet" type="text/css">

</head>
<body>

{% include "components/nav.html" %}

<div class="ax-flex-row ax-split">
    <div class="ax-flex-block-1">
        <section class="demo-section-border"></section>
    </div>

    <div class="ax-flex-block-5">
        <section class="demo-section-border">
            <div class="ax-padding">
                <ul class="ax-grid ax-grid-3 ax-space-xxl">
                    {% for item in jobs.result %}
                        <li>
                            <div class="ax-card-block ax-padding-lr">
                                <div class="ax-title">
                                    <a href="/person/detail/{{ item["id"] }}/" class="ax-ell-title">{{ item["name"] }} </a>
                                </div>
                                <div class="ax-des">
                                    {{ item["desc"] }}
                                </div>
                                <div class="ax-operate">
                                    <div class="ax-row" style="display: flex; align-items: center">
                                        {% if item['star_id'] is not none  %}
                                        <span class="ax-flag ax-right ax-ad"><i>已收藏</i></span>
                                        {% endif %}
                                        <a  onclick="handle_star({{ item['id'] }})" class="ax-btn ax-sm" style='text-align: center'><span class="ax-iconfont ax-icon-star" id="star_btn">{{ item['star_id'] | star_status_for_job_cut }}</span></a>
                                        <div class="ax-col ax-col-16 ax-align-left">{{ item["city"] }}, {{ item["salary_low"] }}K-{{ item["salary_high"] }}K</div>
                                        <span class="ax-gutter-line"></span>
                                        <a href="/person/detail/{{ item["id"] }}/" class="ax-col ax-col-8"><i
                                                class="ax-color-primary">立即投递</i></a>
                                    </div>
                                </div>

                            </div>

                        </li>
                    {% endfor %}
                </ul>

            </div>
                <div class="ax-pagination">
                    <a class="ax-total">共{{ jobs.total_record }}条</a>
                    <a href="{{ jobs.prev_url }}" class="ax-prev">上一页</a>
                    {% for i in range(1, jobs.total_page + 1) %}
                        <a {% print('class="ax-active"') if i == jobs.current_page %}
                                href="?page_size={{ jobs.page_size }}&current_page={{ i }}">
                            {{ i }}</a>
                    {% endfor %}
                    <a href="{{ jobs.next_url }}" class="ax-next">下一页</a>
                </div>

        </section>
    </div>

    <div class="ax-flex-block-1">
        <section class="demo-section-border"></section>
    </div>

</div>
<script src="/static/js/ax.min.js" type="text/javascript"></script>

<script>
function handle_star(id) {
    axAjax.withCredentials = true
    axAjax({
        url: `/star/${id}/`,
        success: ()=> {
            window.location.reload();
        },
        type: 'POST'
    })
}


</script>


</body>
</html>